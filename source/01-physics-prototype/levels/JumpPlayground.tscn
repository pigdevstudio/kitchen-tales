[gd_scene load_steps=17 format=2]

[ext_resource path="res://actors/PlatformActor.gd" type="Script" id=1]
[ext_resource path="res://utility/Geometry2D.gd" type="Script" id=2]
[ext_resource path="res://actors/Gravity.gd" type="Script" id=3]
[ext_resource path="res://actors/Jump.gd" type="Script" id=4]
[ext_resource path="res://actors/ActionBus.gd" type="Script" id=5]
[ext_resource path="res://actors/Walk.gd" type="Script" id=6]
[ext_resource path="res://areas/Ground.tscn" type="PackedScene" id=7]
[ext_resource path="res://areas/Stairs.tscn" type="PackedScene" id=8]
[ext_resource path="res://objects/InfiniteVoid.tscn" type="PackedScene" id=9]
[ext_resource path="res://objects/StaticPlatform.tscn" type="PackedScene" id=10]
[ext_resource path="res://objects/VerticalMovingPlatform.tscn" type="PackedScene" id=11]
[ext_resource path="res://objects/HorizontalMovingPlatform.tscn" type="PackedScene" id=12]
[ext_resource path="res://objects/CircularMovingPlatform.tscn" type="PackedScene" id=13]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 40, 64 )

[sub_resource type="LineShape2D" id=2]
normal = Vector2( 1, 0 )

[sub_resource type="LineShape2D" id=3]
normal = Vector2( -1, 0 )

[node name="JumpPlayground" type="Node2D"]
__meta__ = {
"_edit_horizontal_guides_": [ 960.0, 1280.0, 168.0, -264.0, -432.0, -488.0, -360.0, -792.0, -1320.0 ],
"_edit_vertical_guides_": [ 1920.0, 2240.0, 4424.0, 8248.0, 4160.0, 4904.0 ]
}

[node name="SingleJumpPlatformActor" type="KinematicBody2D" parent="." groups=[
"player",
]]
editor/display_folded = true
position = Vector2( 464, 800 )
collision_layer = 3
script = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="SingleJumpPlatformActor"]
position = Vector2( 0, -64 )
shape = SubResource( 1 )
script = ExtResource( 2 )

[node name="Gravity" type="Node" parent="SingleJumpPlatformActor"]
script = ExtResource( 3 )
platform_actor_path = NodePath("../../SingleJumpPlatformActor")
strength = 4000.0

[node name="Jump" type="Node" parent="SingleJumpPlatformActor"]
script = ExtResource( 4 )
platform_actor_path = NodePath("../../SingleJumpPlatformActor")
strength = 1000.0
max_jumps = 1

[node name="ActionBus" type="Node" parent="SingleJumpPlatformActor"]
script = ExtResource( 5 )

[node name="Walk" type="Node" parent="SingleJumpPlatformActor"]
script = ExtResource( 6 )
platform_actor_path = NodePath("../../SingleJumpPlatformActor")
speed = 800.0

[node name="CameraRig" type="RemoteTransform2D" parent="SingleJumpPlatformActor"]
remote_path = NodePath("../../Camera2D")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2( 464, 800 )
current = true
limit_left = 0
limit_top = -1320
limit_right = 8247
limit_bottom = 1280
limit_smoothed = true
smoothing_enabled = true
drag_margin_left = 0.0
drag_margin_right = 0.0
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="Floor" type="StaticBody2D" parent="."]
editor/display_folded = true
position = Vector2( 0, 960 )

[node name="Ground" parent="Floor" instance=ExtResource( 7 )]

[node name="Ground2" parent="Floor" instance=ExtResource( 7 )]
position = Vector2( 2240, 0 )

[node name="Stairs" parent="Floor" instance=ExtResource( 8 )]
position = Vector2( 2864, -248 )

[node name="Ground3" parent="Floor" instance=ExtResource( 7 )]
position = Vector2( 4904, -88 )
polygon = PoolVector2Array( 0, 0, 0, 408, 1920, 408, 1920, 0 )

[node name="Stairs2" parent="Floor" instance=ExtResource( 8 )]
position = Vector2( 5528, -336 )

[node name="Ground4" parent="Floor" instance=ExtResource( 7 )]
position = Vector2( 2504, -1648 )
polygon = PoolVector2Array( 928, 0, 928, 200, 1920, 200, 1920, 0 )

[node name="Wall" type="StaticBody2D" parent="."]
editor/display_folded = true

[node name="Left" type="CollisionShape2D" parent="Wall"]
shape = SubResource( 2 )

[node name="Right" type="CollisionShape2D" parent="Wall"]
position = Vector2( 8248, -168 )
shape = SubResource( 3 )

[node name="Void" parent="." instance=ExtResource( 9 )]
position = Vector2( 0, 1282.4 )

[node name="Platforms" type="Node2D" parent="."]

[node name="StaticPlatform" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 4544, 824 )

[node name="VerticalMovingPlatform" parent="Platforms" instance=ExtResource( 11 )]
position = Vector2( 6704, 643.2 )

[node name="StaticPlatform2" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 7198.4, 216 )

[node name="StaticPlatform3" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 7696, 216 )

[node name="VerticalMovingPlatform2" parent="Platforms" instance=ExtResource( 11 )]
position = Vector2( 8128, 208 )

[node name="StaticPlatform5" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 7198.4, -216 )

[node name="StaticPlatform4" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 7696, -216 )

[node name="HorizontalMovingPlatform" parent="Platforms" instance=ExtResource( 12 )]
position = Vector2( 6168, -216 )

[node name="StaticPlatform6" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 5840, -312 )

[node name="StaticPlatform7" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 5504, -384 )

[node name="StaticPlatform8" parent="Platforms" instance=ExtResource( 10 )]
editor/display_folded = false
position = Vector2( 5160, -440 )

[node name="CircularMovingPlatform" parent="." instance=ExtResource( 13 )]
position = Vector2( 4720, -488 )

[node name="Goal" type="Label" parent="."]
margin_left = 3816.0
margin_top = -840.0
margin_right = 3971.0
margin_bottom = -792.0
rect_scale = Vector2( 3, 3 )
rect_pivot_offset = Vector2( 76.0164, 48 )
text = "Congratulations you learned single jumps!"
valign = 1
autowrap = true
[connection signal="dash_pressed" from="SingleJumpPlatformActor/ActionBus" to="SingleJumpPlatformActor/Walk" method="set_physics_process" binds= [ false ]]
[connection signal="dash_released" from="SingleJumpPlatformActor/ActionBus" to="SingleJumpPlatformActor/Walk" method="set_physics_process" binds= [ true ]]
[connection signal="jump_pressed" from="SingleJumpPlatformActor/ActionBus" to="SingleJumpPlatformActor/Jump" method="apply"]
[connection signal="jump_released" from="SingleJumpPlatformActor/ActionBus" to="SingleJumpPlatformActor/Jump" method="cancel"]
[connection signal="walk_pressed" from="SingleJumpPlatformActor/ActionBus" to="SingleJumpPlatformActor/Walk" method="set_movement_direction"]
[connection signal="walk_released" from="SingleJumpPlatformActor/ActionBus" to="SingleJumpPlatformActor/Walk" method="stop"]
